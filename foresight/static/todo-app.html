<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Thundra Todo App</title>

    <style>
      body {
        margin: 0;
        padding: 0;

        width: 100%;
        height: 100vh;

        background-color: #000;
        font-family: 'Courier New', Courier, monospace;
      }

      .logo{
        margin: 8px 4px 8px 4px;
        width: 200px;
        height: 40px;
        zoom: 150%;
      }

      .hero-box {
        width: 80%;
        height: 400px;
        margin-left: 10%;
        margin-top: 50px;

        text-align: center;
        
      }

      h1 {
        font-size: 50px;
        
        color:#ffd966;

      }

      #newTodo{
        
        font-family: 'Courier New', Courier, monospace;
        font-size: 24px;

        background:transparent;
        color: #fff;


        border: 2px solid #12154d;
        padding: 10px 10px 10px 10px;

        
        width: 400px;
        outline: none;

      }

      #newTodo::placeholder {
        opacity: 0.7;
        font-style: italic;
        font-size: 20px;
      }

      .btn{
        
        font-family: 'Courier New', Courier, monospace;
        font-size: 24px;

        background-color:#12154d;

        color: #ffd966;

        padding: 10px 10px 10px 10px;
        border: none;

        transition: 0.2s ease-in;
        cursor: pointer;
      }

      .btn:hover{
        background-color:#ffd966;
        color:#12154d;
      }

      .todo-top-controls{
        width: 100%;
        display: inline-block;
        margin-top: 30px;

        display: none;
      }
      

      .todo-list{
        margin-top: 50px; 
        display: flex; 
        flex-direction: column; 
        list-style-type: none; 

        justify-content: center; 
        align-items: center;
      }

      .todo-entity{
        width: 60%;

        background-color: #12154d;
        color: #ffd966;
        margin: 10px 0px 0px 0px;
        padding: 8px 4px 8px 4px;
                
        font-size: 24px;
        text-align: start;
        padding-left: 10px;

        border-radius: 5px;

        cursor: pointer;  
        word-wrap:break-word;
        
      }

      .todo-entity:hover {
        border: 1px solid #ffd966;
      }
      
      .todo-entity-control{
        float: right; 
        padding: 0px 4px 0px 0px;
      }

      .done {
        text-decoration: line-through;
        background-color: #272a53;
      }

      .todo-entity span{
        display: inline-flex;
        justify-content: center;
        align-items: center;

        cursor: pointer;
      }

      .todo-entity span:hover{
        border-bottom: 1px solid  #ffd966;
      }

    </style>


  </head>

  <body>
      <svg class="logo">
          <g id="Pricing-Page" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <g id="Thundra-Logo" fill="#404090" fill-rule="nonzero">
                  <path d="M5.7830303,19.929697 L5.7830303,19.6715152 L7.25212121,19.1939394 L5.79757576,19.3527273 L5.82060606,18.8424242 C5.82060606,18.8424242 8.12363636,18.9757576 8.89333333,18.5575758 C9.6630303,18.1393939 14.3212121,15.3757576 14.3212121,15.3757576 C14.3212121,15.3757576 11.7963636,15.4666667 9.61939394,14.1381818 L10.7660606,12.1987879 L8.70545455,13.7187879 C7.67001134,13.3055269 6.7100007,12.7239505 5.86424242,11.9975758 L5.83151515,11.9551515 L7.97454545,9.91515152 C7.97454545,9.91515152 6.24606061,10.6751515 5.04606061,11.1018182 C4.98921513,11.0560098 4.93498826,11.0070437 4.88363636,10.9551515 C5.48969697,10.5769697 6.33818182,10.0569697 6.33818182,10.0569697 L4.3030303,10.3212121 C4.18181818,10.2666667 3.78909091,9.87878788 3.40848485,9.25575758 C3.19045775,8.90479007 2.99959792,8.53765841 2.83757576,8.15757576 L7.59030303,6.54545455 L2.02060606,6.08969697 C2.02060606,6.08969697 1.92363636,6.04242424 1.73212121,5.65818182 C1.60700864,5.39456153 1.51069408,5.11821596 1.44484848,4.83393939 L5.86181818,4.26424242 L0.627878788,2.96969697 C0.627878788,2.96969697 0.216969697,2.28969697 0.147878788,1.67393939 C0.0910877715,1.14427503 0.123041365,0.608847514 0.242424242,0.0896969697 C0.242424242,0.0896969697 4.32727273,0.227878788 8.40848485,1.60484848 C12.489697,2.98181818 13.0593939,5.56242424 13.0593939,5.56242424 C13.1551515,8.93333333 13.969697,11.3442424 16.7551515,13.3866667 C19.5406061,15.4290909 22.5624242,14.8133333 23.8593939,13.6290909 C24.8557576,12.7151515 23.6169697,12.1890909 23.6169697,12.1890909 C23.6169697,12.1890909 25.3806061,12.0315152 26.7842424,12.2848485 C28.369697,12.569697 29.2412121,13.4315152 29.2412121,13.4315152 L5.7830303,19.929697 Z" id="Path"></path>
                  <path d="M40.9890909,5.55757454 L30.9284848,5.55757454 C30.5840781,5.55889976 30.3050224,5.83741463 30.3030303,6.18181818 L30.3030303,7.8969697 C30.3030303,8.06349351 30.3691816,8.22319693 30.4869317,8.34094705 C30.6046819,8.45869716 30.7643853,8.52484848 30.9309091,8.52484848 L34.1030303,8.52484848 C34.2021432,8.52452511 34.29729,8.56375448 34.3673738,8.63383828 C34.4374576,8.70392209 34.476687,8.79906888 34.4763636,8.89818182 L34.4763636,17.5454545 C34.4760418,17.7118668 34.5419232,17.8715735 34.659481,17.9893586 C34.7770387,18.1071437 34.9366177,18.1733333 35.1030303,18.1733333 L36.8145455,18.1733333 C36.9810693,18.1733333 37.1407727,18.107182 37.2585228,17.9894319 C37.3762729,17.8716818 37.4424242,17.7119784 37.4424242,17.5454545 L37.4424242,8.89818182 C37.4420953,8.79864591 37.4816566,8.70312707 37.5522669,8.63297231 C37.6228772,8.56281755 37.7186501,8.52387527 37.8181818,8.52484848 L40.990303,8.52484848 C41.3370709,8.52484848 41.6181818,8.24373758 41.6181818,7.8969697 L41.6181818,6.18181818 C41.6161796,5.83599788 41.3349163,5.55690234 40.9890909,5.55757454 L40.9890909,5.55757454 Z" id="Path"></path>
                  <path d="M53.2521212,5.55757576 L51.5406061,5.55757576 C51.3740814,5.55660854 51.2139933,5.62183403 51.0955606,5.7389028 C50.9771279,5.85597156 50.9100525,6.0152935 50.9090909,6.18181818 L50.9090909,9.99272727 C50.9090909,10.2076162 50.734889,10.3818182 50.52,10.3818182 L47.0012121,10.3818182 C46.7861262,10.3818192 46.6115771,10.2078122 46.6109091,9.99272727 L46.6109091,6.18181818 C46.6109091,5.8350503 46.3297982,5.55393939 45.9830303,5.55393939 L44.2715152,5.55393939 C44.1051026,5.55393939 43.9455235,5.62012907 43.8279658,5.73791415 C43.7104081,5.85569924 43.6445266,6.01540593 43.6448473,6.18181818 L43.6448473,17.5418182 C43.6445266,17.7082304 43.7104081,17.8679371 43.8279658,17.9857222 C43.9455235,18.1035073 44.1051026,18.1696973 44.2715152,18.169697 L45.9830303,18.169697 C46.1495541,18.169697 46.3092575,18.1035456 46.4270077,17.9857955 C46.5447578,17.8680454 46.6109091,17.708342 46.6109091,17.5418182 L46.6109091,13.7381818 C46.6115771,13.5230969 46.7861262,13.3490899 47.0012121,13.3490909 L50.5236364,13.3490909 C50.7385253,13.3490909 50.9127273,13.5232928 50.9127273,13.7381818 L50.9127273,17.5454545 C50.9127273,17.8922224 51.1938382,18.1733333 51.5406061,18.1733333 L53.2521212,18.1733333 C53.5988891,18.1733333 53.88,17.8922224 53.88,17.5454545 L53.88,6.18181818 C53.8779999,5.83647123 53.597474,5.55756997 53.2521212,5.55757576 L53.2521212,5.55757576 Z" id="Path"></path>
                  <path d="M65.6969697,5.55757576 L63.9842424,5.55757576 C63.6387879,5.55757576 63.3575758,5.8 63.3575758,6.11151515 L63.3575758,14.5963636 C63.3575758,14.9357677 63.0824344,15.2109091 62.7430303,15.2109091 L59.670303,15.2109091 C59.3308989,15.2109091 59.0557576,14.9357677 59.0557576,14.5963636 L59.0557576,6.11151515 C59.0557576,5.80606061 58.7745455,5.55757576 58.4278788,5.55757576 L56.7163636,5.55757576 C56.369697,5.55757576 56.0884848,5.8 56.0884848,6.11151515 L56.0884848,15.6981818 C56.0884848,17.0651703 57.1966479,18.1733333 58.5636364,18.1733333 L63.8484848,18.1733333 C65.2154733,18.1733333 66.3236364,17.0651703 66.3236364,15.6981818 L66.3236364,6.11151515 C66.3236364,5.80606061 66.0436364,5.55757576 65.6969697,5.55757576 Z" id="Path"></path>
                  <path d="M81.9393939,6.18181818 L81.9393939,15.5587879 C81.9394965,16.4434059 81.8108763,17.3233315 81.5575758,18.1709091 L89.6727273,18.1709091 C91.0566477,18.1702399 92.1781818,17.048163 92.1781818,15.6642424 L92.1781818,8.05818182 C92.1781818,6.67713523 91.0586224,5.55755693 89.6775758,5.55755693 L82.569697,5.55755693 C82.4031875,5.55628464 82.2430368,5.62144368 82.1247259,5.738617 C82.0064149,5.85579032 81.9397116,6.01530403 81.9393939,6.18181818 Z M88.4848485,15.206063 L85.2230303,15.206063 C85.1398801,15.2063829 85.0600249,15.1735773 85.0011147,15.1148946 C84.9422046,15.0562119 84.9090909,14.9764842 84.9090909,14.8933333 L84.9090909,8.83272727 C84.9090909,8.7495764 84.9422046,8.66984875 85.0011147,8.61116604 C85.0600249,8.55248333 85.1398801,8.51967771 85.2230303,8.51999765 L88.4848485,8.51999765 C88.8865101,8.51999765 89.2121212,8.84561109 89.2121212,9.24727273 L89.2121212,14.4690909 C89.2147156,14.6636503 89.1392393,14.8511359 89.002567,14.9896305 C88.8658947,15.1281251 88.6794251,15.206063 88.4848485,15.206063 Z" id="Shape"></path>
                  <path d="M104.363641,8.07757576 C104.363641,6.68581819 103.235394,5.55757576 101.843636,5.55757576 L94.7563636,5.55757576 C94.4110109,5.55757576 94.130485,5.83647123 94.1284848,6.18181818 L94.1284848,17.5406061 C94.1284848,17.8869011 94.4088571,18.1678163 94.7551515,18.1684848 L96.4678788,18.1684848 C96.8141732,18.1678163 97.0945461,17.8869011 97.0945455,17.5406061 L97.0945455,15.9430303 C97.0952135,15.7118789 97.2827871,15.5248475 97.5139394,15.5248485 L98.9212121,15.5248485 C99.2032705,15.524212 99.4602616,15.6867211 99.5806061,15.9418182 L100.469091,17.8181818 C100.570726,18.0394047 100.791699,18.1813574 101.035152,18.1818182 L102.819394,18.1818182 C103.032299,18.181333 103.230453,18.0729905 103.345769,17.8940185 C103.461085,17.7150464 103.47785,17.4898306 103.390303,17.2957576 L102.767273,15.92 C102.7283,15.8352519 102.735344,15.7364639 102.785947,15.658103 C102.83655,15.579742 102.923692,15.5326787 103.01697,15.5333333 L103.01697,15.5333333 C103.37487,15.5330128 103.717949,15.3903635 103.970568,15.1368351 C104.223187,14.8833068 104.364602,14.5397175 104.363641,14.1818182 L104.363641,8.07757576 Z M97.4084848,8.52481085 L100.666667,8.52481085 C101.068328,8.52481085 101.393939,8.85045958 101.393939,9.25212121 L101.393939,11.8254545 C101.393939,12.2271162 101.068328,12.5527486 100.666667,12.5527486 L97.4084848,12.5527486 C97.3252213,12.5536973 97.2449832,12.5215484 97.185425,12.4633541 C97.1258668,12.4051598 97.0918679,12.3256879 97.0909091,12.2424242 L97.0909091,8.83757576 C97.0909091,8.7537884 97.1245117,8.6735013 97.1842123,8.61471218 C97.2439129,8.55592305 97.3247076,8.52354946 97.4084848,8.52481085 Z" id="Shape"></path>
                  <path d="M109.28,5.55757576 L108.836364,5.55757576 C107.442598,5.55757576 106.312727,6.68744624 106.312727,8.08121212 L106.312727,17.5454545 C106.312727,17.8922224 106.593838,18.1733333 106.940606,18.1733333 L108.652121,18.1733333 C108.998889,18.1733333 109.28,17.8922224 109.28,17.5454545 L109.28,15.929697 C109.279678,15.8224361 109.322062,15.7194579 109.397793,15.6434991 C109.473524,15.5675402 109.576375,15.524848 109.683636,15.5248485 L113.178182,15.5248485 C113.285443,15.524848 113.388294,15.5675402 113.464025,15.6434991 C113.539757,15.7194579 113.58214,15.8224361 113.581818,15.929697 L113.581818,17.5454545 C113.581818,17.7119784 113.64797,17.8716818 113.76572,17.9894319 C113.88347,18.107182 114.043173,18.1733333 114.209697,18.1733333 L115.921212,18.1733333 C116.087625,18.1733333 116.247204,18.1071437 116.364761,17.9893586 C116.482319,17.8715735 116.548201,17.7118668 116.54788,17.5454545 L116.54788,8.04969697 C116.548549,6.67495151 115.43535,5.55958252 114.060606,5.55757576 L109.28,5.55757576 Z M109.28,11.929697 L109.28,9.15272727 C109.28,8.80595939 109.561111,8.52484848 109.907879,8.52484848 L112.848485,8.52484848 C113.250146,8.52484848 113.575758,8.85045958 113.575758,9.25212121 L113.575758,11.8254545 C113.575758,12.2271162 113.250146,12.5527273 112.848485,12.5527273 L109.907879,12.5527273 C109.562996,12.5527273 109.282663,12.2745699 109.28,11.929697 Z" id="Shape"></path>
                  <path d="M77.0157576,6.18181818 L77.0157576,12.3806061 C77.0128777,12.495328 76.9375594,12.5956 76.828182,12.6303273 C76.7188045,12.6650546 76.5994388,12.6265948 76.5309091,12.5345455 L71.8787879,5.83757576 C71.6400315,5.49399633 71.2462335,5.29141974 70.8278788,5.29685854 L69.1490909,5.31757576 C68.8074822,5.31957868 68.5319904,5.597782 68.5333284,5.93939394 L68.5333284,17.5478788 C68.5333284,17.8941739 68.8137056,18.1750891 69.16,18.1757576 L70.8727273,18.1757576 C71.0391398,18.1757576 71.1987189,18.1095679 71.3162766,17.9917828 C71.4338343,17.8739977 71.4997158,17.714291 71.4993939,17.5478788 L71.4993939,11.1369697 C71.5032262,11.022824 71.5783866,10.9234048 71.687163,10.8885964 C71.7959393,10.8537879 71.9148547,10.8911029 71.9842424,10.9818182 L76.6351515,17.6351515 C76.8698875,17.9722654 77.2546666,18.1732559 77.6654545,18.1733333 L79.3624242,18.1733333 C79.5265865,18.1733336 79.6840074,18.1080376 79.7999739,17.9918437 C79.9159404,17.8756499 79.9809279,17.7181013 79.9806073,17.5539394 L79.9806073,6.18181818 C79.9809279,6.01540593 79.9150464,5.85569924 79.7974887,5.73791415 C79.679931,5.62012907 79.520352,5.55393908 79.3539394,5.55393939 L77.6436364,5.55393939 C77.2968685,5.55393939 77.0157576,5.8350503 77.0157576,6.18181818 L77.0157576,6.18181818 Z" id="Path"></path>
                  <polygon id="Path" points="118.181818 18.1684848 118.181818 16.8860606 117.757576 16.8860606 117.757576 16.6533333 118.909091 16.6533333 118.909091 16.8860606 118.487273 16.8860606 118.487273 18.1684848"></polygon>
                  <polygon id="Path" points="119.138182 18.1684848 119.138182 16.6533333 119.473939 16.6533333 119.904242 17.3866667 120.329697 16.6533333 120.670303 16.6533333 120.670303 18.1684848 120.385455 18.1684848 120.385455 17.0484848 120.007273 17.7272727 119.802424 17.7272727 119.42303 17.0533333 119.42303 18.1684848"></polygon>
              </g>
          </g>

      </svg>
      
      <div class="hero-box">
        <h1>Todo App</h1>

        <div style="display:flexbox" > 
          <input type="text" id="newTodo" class="textbox" placeholder="Type todo here..."/>
          <input type="button" class="btn" id="newTodoSubmit" value="Add Todo" onclick="addTodo(); saveToLocalStorage();" /> 
        </div>

        <div class="todo-top-controls"> 
          <button class="btn" id="clearAllBtn" onclick="clearAll()">Clear All</button>
          <button class="btn" id="checkAllCompletedBtn" onclick="checkAllCompleted()">Check All Completed</button>
          <button class="btn" id="clearCompletedBtn" onclick="clearCompleted()">Clear Completed</button>
        </div>

        <ul class="todo-list">
        </ul>

      </div>
    </div>
      

<script lang="javascript">
      

    var todos =  new Map();

    const todoUIList = document.getElementsByClassName('todo-list').item(0);

    localStorage.getItem('todos') && JSON.parse(localStorage.getItem('todos')).forEach(todo => {
        todos.set(todo.id,todo);
        addTodo(todo.id,todo.text);
    });


    document.getElementById('newTodo').onkeydown = (e) =>{
      if(e.keyCode === 13){
        addTodo();
        saveToLocalStorage();
      }
    }

    function createTodo(id,todo){

      return `
              ${todo}

              <div class="todo-entity-control" >
                <span onclick="done('${id}'); saveToLocalStorage();" title="Mark As Completed">
                  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF" >
                    <path d="M0 0h24v24H0V0z" fill="none"/>
                    <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill=" #ffd966"/>
                  </svg>
                </span>

                <span onclick="duplicate('${id}'); saveToLocalStorage();" title="Duplicate">
                  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 20 24" width="24px" fill="#FFFFFF">
                    <path d="M0 0h24v24H0z" fill="none"/>
                    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" fill=" #ffd966"/>
                  </svg>
                </span>
                <span onclick="remove('${id}'); saveToLocalStorage();" title="Remove">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 20 24" width="24px" fill="#FFFFFF">
                      <path d="M0 0h24v24H0z" fill="none"/>
                      <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill=" #ffd966"/>
                    </svg>
                </span>
                
              </div>`;
    }


    function createId() {
      return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
      );
    }

    function addTodo(id, text){
      const todo = text || document.getElementById('newTodo').value;
      
      if(!todo) return;

      const node = document.createElement('li');
      node.className = "todo-entity";
  
      id = id || createId();
      node.id = id;
      node.innerHTML = createTodo(id, todo);

      todoUIList.append(node);
      todos.set(id, {
        id: id,
        text: todo,
        done: false
      }); 
      
      changeTopControlsVisibility();
    }

    function changeTopControlsVisibility(){
      
      if(!todos.size)
        document.getElementsByClassName('todo-top-controls').item(0).style.display = "none";
      else
        document.getElementsByClassName('todo-top-controls').item(0).style.display = "block";
    }

    function saveToLocalStorage(){

      var todoArray = [];
      for (let id of todos.keys()){
        const {text, done} = todos.get(id);
        todoArray.push({
          id,
          text,
          done
        });
      }
      localStorage.setItem("todos", JSON.stringify(todoArray));
    }

    function done(id){
      
      const master = document.getElementById(id);
      const isDone = todos.get(id).done;
      if(isDone)
        master.classList.remove('done');
      
      else 
        master.classList.add('done');

      todos.get(id).done = !isDone;
      
    }

    function remove(id){
      todos.delete(id);
      document.getElementById(id).remove();

      changeTopControlsVisibility();

    }

    function duplicate(id){
      addTodo(undefined, todos.get(id).text);
    }

    function clearAll(){
      for(let id of todos.keys()){
        remove(id);
      }
      saveToLocalStorage();
    }

    function checkAllCompleted(){
      for(let id of todos.keys()){
        done(id);
      }
      saveToLocalStorage();
    }

    function clearCompleted(){
      for(let id of todos.keys()){
        if(todos.get(id).done){
          remove(id);
        }
      }
      saveToLocalStorage();
    }
  </script>

  </body>
</html>
